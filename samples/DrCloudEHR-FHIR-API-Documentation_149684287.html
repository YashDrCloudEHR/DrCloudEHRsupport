<!DOCTYPE html>
<html>
    <head>
        <title>DrCloudEHR : DrCloudEHR FHIR API Documentation</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DrCloudEHR</a></span>
                            </li>
                                                    <li>
                                <span><a href="DrCloudEHR_33783903.html">DrCloudEHR</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DrCloudEHR : DrCloudEHR FHIR API Documentation
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Ramesh Nagul</span>, last modified on Aug 16, 2024
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1763549373475 {padding: 0px;}
div.rbtoc1763549373475 ul {margin-left: 0px;}
div.rbtoc1763549373475 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1763549373475'>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-SoftwareReleaseVersion'>Software Release Version</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-APIDescription'>API Description</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-APIDocumentationusingSwagger'>API Documentation using Swagger</a>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-Prerequisites'>Prerequisites</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-Technicaldetails'>Technical details</a></li>
</ul>
</li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-Authorization'>Authorization</a>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-Scopes'>Scopes</a></li>
</ul>
</li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-Registration'>Registration</a>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-SmartonFHIRRegistration'>Smart on FHIR Registration</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-AuthorizationCodeGrant'>Authorization Code Grant</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-RefreshTokenGrant'>Refresh Token Grant</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-PasswordGrant'>Password Grant</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-ClientCredentialsGrant'>Client Credentials Grant</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-Logout'>Logout</a></li>
</ul>
</li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-TermsofUse'>Terms of Use</a>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-Definitions'>Definitions</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-LicenseGrant'>License Grant</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-LimitationofLiability'>Limitation of Liability</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-LicenseRestrictions'>License Restrictions</a></li>
<li><a href='#DrCloudEHRFHIRAPIDocumentation-Usage'>Usage</a></li>
</ul>
</li>
</ul>
</div></p><h1 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-SoftwareReleaseVersion">Software Release Version</h1><p style="margin-left: 40.0px;">DrCloudEHR 2025</p><h1 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-APIDescription">API Description</h1><p style="margin-left: 40.0px;">Easy-to-use JSON-based REST API for DrCloudEHR FHIR. See standard DrCloudEHR API docs here. The DrCloudEHR FHIR API conforms to the R4 specification and the US Core 3.1 Implementation Guide (IG).</p><h1 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-APIDocumentationusingSwagger">API Documentation using Swagger</h1><p style="margin-left: 40.0px;">For API Syntax, function names, required/optional parameters see swagger based documentation at <a href="https://cures-api-docs.drcloudemr.com" class="external-link" rel="nofollow">https://cures-api-docs.drcloudemr.com</a></p><h2 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-Prerequisites">Prerequisites</h2><p style="margin-left: 40.0px;">Interoperability requirements with DrCloudEHR for Native Applications</p><ul><li style="list-style-type: none;"><ul><li>Native applications wishing to use the DrCloudEHR FHIR API with refresh tokens MUST be capable of storing the refresh token in a secure manner similar to the requirements of storing a secret for confidential apps.</li><li>Native applications must support either PKCE with a public app or use a confidential app. PKCE is still recommended to be used with confidential apps to prevent MITM attacks.</li><li>Native applications must request the offline_scope in their initial API request in order to receive a refresh token</li><li>Native application refresh tokens are valid for 3 months before they must be renewed.</li><li>Native applications will receive a new refresh token every time they are renewed.</li><li>Native applications can only communicate with DrCloudEHR over a TLS secured channel in order to ensure the safe transmission of the refresh token.</li><li>Native applications should use certificate pinning to mitigate any SSL MITM attack.</li><li>Native applications must use the Authorization Code grant flow in order to receive a refresh token.</li><li>It is recommended that native applications follow best practices for native client applications as outlined in RFC 8252 OAuth 2.0 for Native Apps.</li></ul></li></ul><h2 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-Technicaldetails">Technical details</h2><ul><li style="list-style-type: none;"><ul><li>The DrCloudEHR server uses HTTPS to ensure a secure data connection.</li><li>Parameters are passed to the API scripts using POST variables.<ul><li>Most of the API calls return their result as an XML file.</li><li>The script that handles MU3 data request returns a JSON file.</li></ul></li></ul></li></ul><h1 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-Authorization">Authorization</h1><p style="margin-left: 40.0px;">DrCloudEHR uses OIDC compliant authorization for API. SSL is required.</p><h3 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-Scopes">Scopes</h3><p style="margin-left: 40.0px;">This is a listing of scopes:</p><ul><li style="list-style-type: none;"><ul><li><code>openid</code><span> </span>(Generic mandatory scope)</li><li><code>fhirUser</code></li><li><code>online_access</code></li><li><code>offline_access</code><span> </span>(Will signal server to provide a refresh token)</li><li><code>launch</code></li><li><code>launch/patient</code></li><li><code>api:fhir</code><span> </span>(fhir which are the /fhir/ endpoints)<ul><li><code>patient/AllergyIntolerance.read</code></li><li><code>patient/Appointment.read</code></li><li><code>patient/Binary.read</code></li><li><code>patient/CarePlan.read</code></li><li><code>patient/CareTeam.read</code></li><li><code>patient/Condition.read</code></li><li><code>patient/Coverage.read</code></li><li><code>patient/Device.read</code></li><li><code>patient/DiagnosticReport.read</code></li><li><code>patient/DocumentReference.read</code></li><li><code>patient/DocumentReference.$docref</code></li><li><code>patient/Encounter.read</code></li><li><code>patient/Goal.read</code></li><li><code>patient/Immunization.read</code></li><li><code>patient/Location.read</code></li><li><code>patient/MedicationRequest.read</code></li><li><code>patient/Medication.read</code></li><li><code>patient/Observation.read</code></li><li><code>patient/Organization.read</code></li><li><code>patient/Patient.read</code></li><li><code>patient/Person.read</code></li><li><code>patient/Practitioner.read</code></li><li><code>patient/Procedure.read</code></li><li><code>patient/Provenance.read</code></li><li><code>system/AllergyIntolerance.read</code></li><li><code>system/Binary.read</code></li><li><code>system/CarePlan.read</code></li><li><code>system/CareTeam.read</code></li><li><code>system/Condition.read</code></li><li><code>system/Coverage.read</code></li><li><code>system/Device.read</code></li><li><code>system/DiagnosticReport.read</code></li><li><code>system/DocumentReference.read</code></li><li><code>system/DocumentReference.$docref</code></li><li><code>system/Encounter.read</code></li><li><code>system/Goal.read</code></li><li><code>system/Group.read</code></li><li><code>system/Group.$export</code></li><li><code>system/Immunization.read</code></li><li><code>system/Location.read</code></li><li><code>system/MedicationRequest.read</code></li><li><code>system/Medication.read</code></li><li><code>system/Observation.read</code></li><li><code>system/Organization.read</code></li><li><code>system/Patient.read</code></li><li><code>system/Patient.$export</code></li><li><code>system/Person.read</code></li><li><code>system/Practitioner.read</code></li><li><code>system/PractitionerRole.read</code></li><li><code>system/Procedure.read</code></li><li><code>system/Provenance.read</code></li><li><code>system/*.$bulkdata-status</code></li><li><code>system/*.$export</code></li><li><code>user/AllergyIntolerance.read</code></li><li><code>user/Binary.read</code></li><li><code>user/CarePlan.read</code></li><li><code>user/CareTeam.read</code></li><li><code>user/Condition.read</code></li><li><code>user/Coverage.read</code></li><li><code>user/Device.read</code></li><li><code>user/DiagnosticReport.read</code></li><li><code>user/DocumentReference.read</code></li><li><code>user/DocumentReference.$docref</code></li><li><code>user/Encounter.read</code></li><li><code>user/Goal.read</code></li><li><code>user/Immunization.read</code></li><li><code>user/Location.read</code></li><li><code>user/MedicationRequest.read</code></li><li><code>user/Medication.read</code></li><li><code>user/Observation.read</code></li><li><code>user/Organization.read</code></li><li><code>user/Patient.read</code></li><li><code>user/Person.read</code></li><li><code>user/Practitioner.read</code></li><li><code>user/Practitioner.write</code></li><li><code>user/PractitionerRole.read</code></li><li><code>user/Procedure.read</code></li><li><code>user/Provenance.read</code></li></ul></li></ul></li></ul><h1 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-Registration">Registration</h1><p style="margin-left: 40.0px;">Here is an example for registering a client. A client needs to be registered before applying for grant to obtain access/refresh tokens. Note: &quot;post_logout_redirect_uris&quot; is optional and only used if client wants a redirect to its own confirmation workflow.</p><p style="margin-left: 40.0px;">Note that all scopes are included in this example for demonstration purposes. For production purposes, should only include the necessary scopes.</p><pre style="margin-left: 40.0px;">curl -X POST -k -H <span class="pl-s"><span class="pl-pds">'</span>Content-Type: application/json<span class="pl-pds">'</span></span> -i https://localhost/oauth2/default/registration --data <span class="pl-s"><span class="pl-pds">'</span>{</span>
<span class="pl-s">   &quot;application_type&quot;: &quot;private&quot;,</span>
<span class="pl-s">   &quot;redirect_uris&quot;:</span>
<span class="pl-s">     [&quot;https://client.example.org/callback&quot;],</span>
<span class="pl-s">   &quot;post_logout_redirect_uris&quot;:</span>
<span class="pl-s">     [&quot;https://client.example.org/logout/callback&quot;],</span>
<span class="pl-s">   &quot;client_name&quot;: &quot;A Private App&quot;,</span>
<span class="pl-s">   &quot;token_endpoint_auth_method&quot;: &quot;client_secret_post&quot;,</span>
<span class="pl-s">   &quot;contacts&quot;: [&quot;me@example.org&quot;, &quot;them@example.org&quot;],</span>
<span class="pl-s">   &quot;scope&quot;: &quot;openid offline_access api:fhir user/allergy.read user/allergy.write user/appointment.read user/appointment.write user/dental_issue.read user/dental_issue.write user/document.read user/document.write user/drug.read user/encounter.read user/encounter.write user/facility.read user/facility.write user/immunization.read user/insurance.read user/insurance.write user/insurance_company.read user/insurance_company.write user/insurance_type.read user/list.read user/medical_problem.read user/medical_problem.write user/medication.read user/medication.write user/message.write user/patient.read user/patient.write user/practitioner.read user/practitioner.write user/prescription.read user/procedure.read user/soap_note.read user/soap_note.write user/surgery.read user/surgery.write user/transaction.read user/transaction.write user/vital.read user/vital.write user/AllergyIntolerance.read user/CareTeam.read user/Condition.read user/Coverage.read user/Encounter.read user/Immunization.read user/Location.read user/Medication.read user/MedicationRequest.read user/Observation.read user/Organization.read user/Organization.write user/Patient.read user/Patient.write user/Practitioner.read user/Practitioner.write user/PractitionerRole.read user/Procedure.read patient/encounter.read patient/patient.read patient/AllergyIntolerance.read patient/CareTeam.read patient/Condition.read patient/Coverage.read patient/Encounter.read patient/Immunization.read patient/MedicationRequest.read patient/Observation.read patient/Patient.read patient/Procedure.read&quot;</span>
<span class="pl-s">  }<span class="pl-pds">'</span></span></pre><p style="margin-left: 40.0px;">Response:</p><pre style="margin-left: 40.0px;">{
    <span class="pl-s"><span class="pl-pds">&quot;</span>client_id<span class="pl-pds">&quot;</span></span>: <span class="pl-s"><span class="pl-pds">&quot;</span>LnjqojEEjFYe5j2Jp9m9UnmuxOnMg4VodEJj3yE8_OA<span class="pl-pds">&quot;</span></span>,
    <span class="pl-s"><span class="pl-pds">&quot;</span>client_secret<span class="pl-pds">&quot;</span></span>: <span class="pl-s"><span class="pl-pds">&quot;</span>j21ecvLmFi9HPc_Hv0t7Ptmf1pVcZQLtHjIdU7U9tkS9WAjFJwVMav0G8ogTJ62q4BATovC7BQ19Qagc4x9BBg<span class="pl-pds">&quot;</span></span>,
    <span class="pl-s"><span class="pl-pds">&quot;</span>registration_access_token<span class="pl-pds">&quot;</span></span>: <span class="pl-s"><span class="pl-pds">&quot;</span>uiDSXx2GNSvYy5n8eW50aGrJz0HjaGpUdrGf07Agv_Q<span class="pl-pds">&quot;</span></span>,
    <span class="pl-s"><span class="pl-pds">&quot;</span>registration_client_uri<span class="pl-pds">&quot;</span></span>: <span class="pl-s"><span class="pl-pds">&quot;</span>https:\/\/localhost\/oauth2\/default\/client\/6eUVG0-qK2dYiwfYdECKIw<span class="pl-pds">&quot;</span></span>,
    <span class="pl-s"><span class="pl-pds">&quot;</span>client_id_issued_at<span class="pl-pds">&quot;</span></span>: 1604767861,
    <span class="pl-s"><span class="pl-pds">&quot;</span>client_secret_expires_at<span class="pl-pds">&quot;</span></span>: 0,
    <span class="pl-s"><span class="pl-pds">&quot;</span>contacts<span class="pl-pds">&quot;</span></span>: [<span class="pl-s"><span class="pl-pds">&quot;</span>me@example.org<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span>them@example.org<span class="pl-pds">&quot;</span></span>],
    <span class="pl-s"><span class="pl-pds">&quot;</span>application_type<span class="pl-pds">&quot;</span></span>: <span class="pl-s"><span class="pl-pds">&quot;</span>private<span class="pl-pds">&quot;</span></span>,
    <span class="pl-s"><span class="pl-pds">&quot;</span>client_name<span class="pl-pds">&quot;</span></span>: <span class="pl-s"><span class="pl-pds">&quot;</span>A Private App<span class="pl-pds">&quot;</span></span>,
    <span class="pl-s"><span class="pl-pds">&quot;</span>redirect_uris<span class="pl-pds">&quot;</span></span>: [<span class="pl-s"><span class="pl-pds">&quot;</span>https:\/\/client.example.org\/callback<span class="pl-pds">&quot;</span></span>],
    <span class="pl-s"><span class="pl-pds">&quot;</span>token_endpoint_auth_method<span class="pl-pds">&quot;</span></span>: <span class="pl-s"><span class="pl-pds">&quot;</span>client_secret_post<span class="pl-pds">&quot;</span></span>,
    &quot;scope&quot;: &quot;openid offline_access api:fhir user/allergy.read user/allergy.write user/appointment.read user/appointment.write user/dental_issue.read user/dental_issue.write user/document.read user/document.write user/drug.read user/encounter.read user/encounter.write user/facility.read user/facility.write user/immunization.read user/insurance.read user/insurance.write user/insurance_company.read user/insurance_company.write user/insurance_type.read user/list.read user/medical_problem.read user/medical_problem.write user/medication.read user/medication.write user/message.write user/patient.read user/patient.write user/practitioner.read user/practitioner.write user/prescription.read user/procedure.read user/soap_note.read user/soap_note.write user/surgery.read user/surgery.write  user/transaction.read user/transaction.write user/vital.read user/vital.write user/AllergyIntolerance.read user/CareTeam.read user/Condition.read user/Coverage.read user/Encounter.read user/Immunization.read user/Location.read user/Medication.read user/MedicationRequest.read user/Observation.read user/Organization.read user/Organization.write user/Patient.read user/Patient.write user/Practitioner.read user/Practitioner.write user/PractitionerRole.read user/Procedure.read patient/encounter.read patient/patient.read patient/AllergyIntolerance.read patient/CareTeam.read patient/Condition.read patient/Coverage.read patient/Encounter.read patient/Immunization.read patient/MedicationRequest.read patient/Observation.read patient/Patient.read patient/Procedure.read&quot;
}</pre><h3 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-SmartonFHIRRegistration">Smart on FHIR Registration</h3><p style="margin-left: 40.0px;">SMART Enabled Apps are supported.</p><p style="margin-left: 40.0px;">SMART client can be registered at /interface/smart/register-app.php. For example<span> </span><a href="https://drc-india.drcloudemr.com/drcloud/interface/smart/register-app.php" class="external-link" rel="nofollow">https://drc-india.drcloudemr.com/drcloud/interface/smart/register-app.php</a></p><p style="margin-left: 40.0px;">After registering the SMART client, can then Enable it in DrCloudEHR at Administration-&gt;System-&gt;API Clients</p><p style="margin-left: 40.0px;">After it is enabled, the SMART App will then be available to use in the Patient Summary screen (SMART Enabled Apps widget).</p><p style="margin-left: 40.0px;">See this github issue for an example of a Smart App installation:<span> </span><a href="https://github.com/openemr/openemr/issues/4148" class="external-link" style="text-decoration: none;" rel="nofollow">#4148</a></p><h3 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-AuthorizationCodeGrant">Authorization Code Grant</h3><p style="margin-left: 40.0px;">This is the recommended standard mechanism to obtain access/refresh tokens. This is done by using an OAuth2 client with provider url of<span> </span><code>oauth2/&lt;site&gt;</code>; an example full path would be<span> </span><code><a href="https://localhost:9300/oauth2/default" class="external-link" rel="nofollow">https://localhost/oauth2/default</a></code>. Standard OAUTH2 clients will retrieve the authorize URL from the FHIR /metadata endpoint, but if you are building your own client you can access the metadata or go directly to the<span> </span><a style="text-decoration: none;" rel="nofollow" href="https://localhost:9300/oauth2/default/authorize" class="external-link">https://localhost/oauth2/default/authorize</a><span> </span>endpoint.</p><p style="margin-left: 40.0px;">Note that a refresh token is only supplied if the<span> </span><code>offline_access</code><span> </span>scope is provided when requesting authorization grant.</p><p style="margin-left: 40.0px;">You will need to pass the scopes you are requesting, the redirect_uri (must be one that was registered at the time of your client registration), and a state parameter which can be any value. Once authorization has finished the browser will be redirected to the URL specified in redirect_uri with an encrypted code value and the state value sent in the initial authorize request.</p><p style="margin-left: 40.0px;">Example GET (this must be done in a browser):</p><pre class="notranslate" style="margin-left: 40.0px;"><code>GET /oauth2/default/authorize?client_id=yi4mnmVadpnqnJiOigkcGshuG-Kayiq6kmLqCJsYrk4&amp;response_type=code&amp;scope=launch%2Fpatient%20openid%20fhirUser%20offline_access%20patient%2FAllergyIntolerance.read%20patient%2FCarePlan.read%20patient%2FCareTeam.read%20patient%2FCondition.read%20patient%2FDevice.read%20patient%2FDiagnosticReport.read%20patient%2FDocumentReference.read%20patient%2FEncounter.read%20patient%2FGoal.read%20patient%2FImmunization.read%20patient%2FLocation.read%20patient%2FMedication.read%20patient%2FMedicationRequest.read%20patient%2FObservation.read%20patient%2FOrganization.read%20patient%2FPatient.read%20patient%2FPractitioner.read%20patient%2FProcedure.read%20patient%2FProvenance.read&amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcallback&amp;state=9512151b-e5ca-cb4b-1ddc-aaf4cd8c6ecc
</code></pre><p style="margin-left: 40.0px;">The client application must then make a request for an access token by hitting the /token endpoint. Note the redirect_uri MUST match what what was sent in /authorize endpoint. If your application is registered as a public application you must include the client_id in the POST request. If you are registered as a confidential app you must use HTTP Basic Authentication where the client_id is your username and the password is your client_secret. HTTP Basic Authentication follows the algorithm of base64_encode(username:client_secret). In PHP this would be base64_encode($client_id . ':' . $client_secret); Note that this mechanism should ONLY be used over an encrypted protocol such as TLS to prevent leaking your client_secret.</p><p style="margin-left: 40.0px;">Example Public Application POST</p><pre class="notranslate" style="margin-left: 40.0px;"><code>curl -X POST -k -H 'Content-Type: application/x-www-form-urlencoded'
'https://localhost/oauth2/default/token'
--data 'grant_type=authorization_code&amp;client_id=yi4mnmVadpnqnJiOigkcGshuG-Kayiq6kmLqCJsYrk4redirect_uri=https%3A%2F%2Fclient.example.org%2Fcallback&amp;code=def50...'
</code></pre><p style="margin-left: 40.0px;">Example Private Application POST</p><pre class="notranslate" style="margin-left: 40.0px;"><code>curl -X POST -k -H 'Content-Type: application/x-www-form-urlencoded' \
    -H 'Authorization: Basic c3Z2TThFX1hISEhYUmtoZzUyeWoyNjdIOEYwQnpmT09pRmE4aUZBT290WTptbzZpZEFPaEU0UVYxb0lacUR5YTFHR1JHVGU5VDQzNWpzeTlRbWYxV2NiVFQ4NXhuZW5VdUpaUFR0bUZGT1QxVkhmYjZiclVvWWZ2Znd2NTFQejFldw==' \
    'https://localhost/oauth2/default/token' \
    --data 'grant_type=authorization_code&amp;client_id=yi4mnmVadpnqnJiOigkcGshuG-Kayiq6kmLqCJsYrk4redirect_uri=https%3A%2F%2Fclient.example.org%2Fcallback&amp;code=def50...'
</code></pre><h3 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-RefreshTokenGrant">Refresh Token Grant</h3><p style="margin-left: 40.0px;">Note that a refresh token is only supplied if the<span> </span><code>offline_access</code><span> </span>scope is provided when requesting authorization or password grant.</p><p style="margin-left: 40.0px;">Example:</p><pre style="margin-left: 40.0px;">curl -X POST -k -H <span class="pl-s"><span class="pl-pds">'</span>Content-Type: application/x-www-form-urlencoded<span class="pl-pds">'</span></span>
-i <span class="pl-s"><span class="pl-pds">'</span>https://localhost/oauth2/default/token<span class="pl-pds">'</span></span>
--data <span class="pl-s"><span class="pl-pds">'</span>grant_type=refresh_token</span>
<span class="pl-s">&amp;client_id=LnjqojEEjFYe5j2Jp9m9UnmuxOnMg4VodEJj3yE8_OA</span>
<span class="pl-s">&amp;refresh_token=def5020089a766d16...<span class="pl-pds">'</span></span></pre><p style="margin-left: 40.0px;">Response:</p><pre style="margin-left: 40.0px;">{
  <span class="pl-ent">&quot;id_token&quot;</span>: <span class="pl-s"><span class="pl-pds">&quot;</span>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJrYn...<span class="pl-pds">&quot;</span></span>,
  <span class="pl-ent">&quot;token_type&quot;</span>: <span class="pl-s"><span class="pl-pds">&quot;</span>Bearer<span class="pl-pds">&quot;</span></span>,
  <span class="pl-ent">&quot;expires_in&quot;</span>: <span class="pl-c1">3599</span>,
  <span class="pl-ent">&quot;access_token&quot;</span>: <span class="pl-s"><span class="pl-pds">&quot;</span>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJrYnl1RkRp...<span class="pl-pds">&quot;</span></span>,
  <span class="pl-ent">&quot;refresh_token&quot;</span>: <span class="pl-s"><span class="pl-pds">&quot;</span>def5020017b484b0add020bf3491a8a537fa04eda12...<span class="pl-pds">&quot;</span></span>
}</pre><h3 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-PasswordGrant">Password Grant</h3><p style="margin-left: 40.0px;">Recommend not using this mechanism unless you know what you are doing. It is considered far less secure than the standard authorization code method. Because of security implications, it is not turned on by default. It can be turned on at Administration-&gt;Globals-&gt;Connectors-&gt;'Enable OAuth2 Password Grant (Not considered secure)'.</p><p style="margin-left: 40.0px;">Note that all scopes are included in these examples for demonstration purposes. For production purposes, should only include the necessary scopes.</p><p style="margin-left: 40.0px;">Note that a refresh token is only supplied if the<span> </span><code>offline_access</code><span> </span>scope is provided when requesting password grant.</p><p style="margin-left: 40.0px;">Example for<span> </span><code>users</code><span> </span>role:</p><pre style="margin-left: 40.0px;">curl -X POST -k -H <span class="pl-s"><span class="pl-pds">'</span>Content-Type: application/x-www-form-urlencoded<span class="pl-pds">'</span></span>
-i <span class="pl-s"><span class="pl-pds">'</span>https://localhost/oauth2/default/token<span class="pl-pds">'</span></span>
--data <span class="pl-s"><span class="pl-pds">'</span>grant_type=password</span>
<span class="pl-s">&amp;client_id=LnjqojEEjFYe5j2Jp9m9UnmuxOnMg4VodEJj3yE8_OA</span>
<span class="pl-s">&amp;scope=openid%20offline_access%20api%3Adrcloud%20api%3Afhir%20user%2Fallergy.read%20user%2Fallergy.write%20user%2Fappointment.read%20user%2Fappointment.write%20user%2Fdental_issue.read%20user%2Fdental_issue.write%20user%2Fdocument.read%20user%2Fdocument.write%20user%2Fdrug.read%20user%2Fencounter.read%20user%2Fencounter.write%20user%2Ffacility.read%20user%2Ffacility.write%20user%2Fimmunization.read%20user%2Finsurance.read%20user%2Finsurance.write%20user%2Finsurance_company.read%20user%2Finsurance_company.write%20user%2Finsurance_type.read%20user%2Flist.read%20user%2Fmedical_problem.read%20user%2Fmedical_problem.write%20user%2Fmedication.read%20user%2Fmedication.write%20user%2Fmessage.write%20user%2Fpatient.read%20user%2Fpatient.write%20user%2Fpractitioner.read%20user%2Fpractitioner.write%20user%2Fprescription.read%20user%2Fprocedure.read%20user%2Fsoap_note.read%20user%2Fsoap_note.write%20user%2Fsurgery.read%20user%2Fsurgery.write%20user%2Ftransaction.read%20user%2Ftransaction.write%20user%2Fvital.read%20user%2Fvital.write%20user%2FAllergyIntolerance.read%20user%2FCareTeam.read%20user%2FCondition.read%20user%2FCoverage.read%20user%2FEncounter.read%20user%2FImmunization.read%20user%2FLocation.read%20user%2FMedication.read%20user%2FMedicationRequest.read%20user%2FObservation.read%20user%2FOrganization.read%20user%2FOrganization.write%20user%2FPatient.read%20user%2FPatient.write%20user%2FPractitioner.read%20user%2FPractitioner.write%20user%2FPractitionerRole.read%20user%2FProcedure.read</span>
<span class="pl-s">&amp;user_role=users</span>
<span class="pl-s">&amp;username=admin</span>
<span class="pl-s">&amp;password=pass<span class="pl-pds">'</span></span></pre><p style="margin-left: 40.0px;">Example for<span> </span><code>patient</code><span> </span>role:</p><pre style="margin-left: 40.0px;">curl -X POST -k -H <span class="pl-s"><span class="pl-pds">'</span>Content-Type: application/x-www-form-urlencoded<span class="pl-pds">'</span></span>
-i <span class="pl-s"><span class="pl-pds">'</span>https://localhost/oauth2/default/token<span class="pl-pds">'</span></span>
--data <span class="pl-s"><span class="pl-pds">'</span>grant_type=password</span>
<span class="pl-s">&amp;client_id=LnjqojEEjFYe5j2Jp9m9UnmuxOnMg4VodEJj3yE8_OA</span>
<span class="pl-s">&amp;scope=openid%20offline_access%20api%3Aport%20api%3Afhir%20patient%2Fencounter.read%20patient%2Fpatient.read%20patient%2FAllergyIntolerance.read%20patient%2FCareTeam.read%20patient%2FCondition.read%20patient%2FCoverage.read%20patient%2FEncounter.read%20patient%2FImmunization.read%20patient%2FMedication.read%20patient%2FMedicationRequest.read%20patient%2FObservation.read%20patient%2FPatient.read%20patient%2FProcedure.read</span>
<span class="pl-s">&amp;user_role=patient</span>
<span class="pl-s">&amp;username=Phil1</span>
<span class="pl-s">&amp;password=phil</span>
<span class="pl-s">&amp;email=heya@invalid.email.com<span class="pl-pds">'</span></span></pre><p style="margin-left: 40.0px;">Response:</p><pre style="margin-left: 40.0px;">{
  <span class="pl-ent">&quot;id_token&quot;</span>: <span class="pl-s"><span class="pl-pds">&quot;</span>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJrYn...<span class="pl-pds">&quot;</span></span>,
  <span class="pl-ent">&quot;token_type&quot;</span>: <span class="pl-s"><span class="pl-pds">&quot;</span>Bearer<span class="pl-pds">&quot;</span></span>,
  <span class="pl-ent">&quot;expires_in&quot;</span>: <span class="pl-c1">3599</span>,
  <span class="pl-ent">&quot;access_token&quot;</span>: <span class="pl-s"><span class="pl-pds">&quot;</span>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiJrYnl1RkRp...<span class="pl-pds">&quot;</span></span>,
  <span class="pl-ent">&quot;refresh_token&quot;</span>: <span class="pl-s"><span class="pl-pds">&quot;</span>def5020017b484b0add020bf3491a8a537fa04eda12...<span class="pl-pds">&quot;</span></span>
}</pre><h3 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-ClientCredentialsGrant">Client Credentials Grant</h3><p style="margin-left: 40.0px;">This is an advanced grant that uses JSON Web Key Sets(JWKS) to authenticate and identify the client. This credential grant is required to be used for access to any<span> </span><strong>system/*.$export</strong><span> </span>scopes. API clients must register either web accessible JWKS URI that hosts a RSA384 compatible key, or provide their JWKS as part of the registration. Client Credentials Grant access tokens are short lived and valid for only 1 minute and no refresh token is issued. Tokens are requested at<span> </span><code>/oauth2/default/token</code><span> </span>To walk you through how to do this process you can follow<span> </span><a href="https://hl7.org/fhir/uv/bulkdata/authorization/index.html" rel="nofollow" style="text-decoration: none;" class="external-link">this guide created by HL7</a>.</p><h3 style="margin-left: 40.0px;" id="DrCloudEHRFHIRAPIDocumentation-Logout">Logout</h3><p style="margin-left: 40.0px;">A grant (both Authorization Code and Password grants) can be logged out (ie. removed) by url of<span> </span><code>oauth2/&lt;site&gt;/logout?id_token_hint=&lt;id_token&gt;</code>; an example full path would be<span> </span><code><a rel="nofollow">https://localhost/oauth2/default/logout?id_token_hint=&lt;id_token</a>&gt;</code>. Optional:<span> </span><code>post_logout_redirect_uri</code><span> </span>and<span> </span><code>state</code><span> </span>parameters can also be sent; note that<span> </span><code>post_logout_redirect_uris</code><span> </span>also needs to be set during registration for it to work.</p><h1 id="DrCloudEHRFHIRAPIDocumentation-TermsofUse">Terms of Use</h1><p>This is a legal agreement (&quot;Agreement&quot;) between you, the &quot;User&quot;, and EnSoftek Inc (&quot;Company&quot;).  BY ACCEPTING THIS AGREEMENT, YOU ARE CONSENTING TO BE BOUND BY ITS TERMS. Read the terms of the agreement <a href="https://www.drcloudemr.com/terms-of-use/" class="external-link" rel="nofollow">here. </a></p><h2 id="DrCloudEHRFHIRAPIDocumentation-Definitions">Definitions</h2><p>As used herein: the &quot;Software&quot; means the DrCloudEHR Application Programming Interface (API).</p><h2 id="DrCloudEHRFHIRAPIDocumentation-LicenseGrant">License Grant</h2><p>All Users SHALL possess an active DrCloudEHR license agreement.   Use of this Software SHALL BE COVERED BY THE TERMS OF THAT LICENSE AGREEMENT. If you do not have a license, existing customers can email <a href="mailto:support@drcloudemr.com?Subject=API access" class="external-link" rel="nofollow">support@drcloudemr.com</a>. New Customers, please email <a href="mailto:info@drcloudehr.com" class="external-link" rel="nofollow">info@drcloudehr.com</a></p><p><br/></p><h2 id="DrCloudEHRFHIRAPIDocumentation-LimitationofLiability">Limitation of Liability</h2><p>Limitation of Liability for this Software SHALL BE COVERED BY THE TERMS OF THAT LICENSE AGREEMENT.</p><h2 id="DrCloudEHRFHIRAPIDocumentation-LicenseRestrictions">License Restrictions</h2><p>The Company may limit the number of persons that can use the Software.  </p><h2 id="DrCloudEHRFHIRAPIDocumentation-Usage">Usage</h2><p>If you become aware of any unauthorized access or use of the Software, you shall immediately notify the Company.</p><p><br/></p>
                    </div>

                                                            <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/149684287/149684291.png">image2019-1-15_10-31-27.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/149684287/149684290.png">image2019-1-15_10-27-59.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/149684287/149684289.png">Screen Shot 2019-01-14 at 2.22.45 PM.png</a> (image/png)
                                <br/>
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/149684287/149684288.png">image2019-1-15_12-46-56.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Nov 19, 2025 02:49</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
