<!DOCTYPE html>
<html>
    <head>
        <title>DrCloudEHR : DrCloudEHR 2020 - MU3 API Documentation</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">DrCloudEHR</a></span>
                            </li>
                                                    <li>
                                <span><a href="DrCloudEHR_33783903.html">DrCloudEHR</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            DrCloudEHR : DrCloudEHR 2020 - MU3 API Documentation
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Ramesh Nagul</span>, last modified on May 09, 2019
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1763549373430 {padding: 0px;}
div.rbtoc1763549373430 ul {margin-left: 0px;}
div.rbtoc1763549373430 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1763549373430'>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-APIDescription'>API Description</a>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-SoftwareReleaseVersion'>Software Release Version</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-MU3API'>MU3 API</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-APITestProgramsOverview'>API Test Programs Overview</a></li>
</ul>
</li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-SettingupDrCloudEHRAPI'>Setting up DrCloudEHR API</a>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-Installation'>Installation</a></li>
</ul>
</li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-initsetup.php'>initsetup.php</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-Createthetest_settings.incfile'>Create the test_settings.inc file</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-LogintoAPI'>Login to API</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-TermsofUse'>Terms of Use</a>
<ul class='toc-indentation'>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-Definitions'>Definitions</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-LicenseGrant'>License Grant</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-LimitationofLiability'>Limitation of Liability</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-LicenseRestrictions'>License Restrictions</a></li>
<li><a href='#DrCloudEHR2020MU3APIDocumentation-Usage'>Usage</a></li>
</ul>
</li>
</ul>
</div></p><h1 id="DrCloudEHR2020MU3APIDocumentation-APIDescription">API Description</h1><p>The DrCloud MU3 API is a web-based, CCDS-compliant API that is used to request and receive data from a DrCloudEHR server.</p><ul><li>When a user 'logs in' to the API, a token is received that can be used to authenticate later API calls.<ul><li>User creation is handled by the existing User management interface.</li><li>Tokens are valid for up to 60 minutes.   However, a user may request a new token at any time.</li></ul></li><li>Parameters are passed to the API scripts using POST variables.<ul><li>The programs written to test the API are PHP scripts that use libcurl to communicate with the API scripts.</li></ul></li><li>The scripts return requested MU3 data formatted as an XML file.<ul><li>For API calls that request MU3 section data, the returned files are generated by DrCloud's CCDA reporting code.</li></ul></li></ul><h2 id="DrCloudEHR2020MU3APIDocumentation-SoftwareReleaseVersion">Software Release Version</h2><p>DrCloudEHR 2020</p><h2 id="DrCloudEHR2020MU3APIDocumentation-MU3API">MU3 API</h2><p>This table shows the API for Meaningful Use validation.   Most of the API calls make use of POST variables.   Browser-based HTML forms can be used to access these, though the test scripts can be scripted for simpler automated testing.</p><p><br/></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable"><colgroup><col style="width: 234.0px;"/><col style="width: 213.0px;"/><col style="width: 272.0px;"/><col style="width: 259.0px;"/><col style="width: 235.0px;"/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Filename</th><th colspan="1" class="confluenceTh">POST Variables</th><th colspan="1" class="confluenceTh"><p>Returns</p><p>(status = 0)</p></th><th colspan="1" class="confluenceTh"><p>Errors</p><p>(status != 0)</p></th><th colspan="1" class="confluenceTh">Comments</th></tr><tr><td class="confluenceTd">getallpatients.php</td><td colspan="1" class="confluenceTd"><ul><li>site</li><li>token</li></ul></td><td colspan="1" class="confluenceTd"><p>XML file containing an array of records containing:</p><ul><li>id</li><li>pid</li><li>firstname</li><li>lastname</li><li>middlename</li><li>phone</li><li>dob</li><li>gender</li><li>patient profile image</li></ul></td><td colspan="1" class="confluenceTd"><ul><li>1 - No Patient Vitals data found</li><li>1 - Error processing patient records</li><li>-2 - You are not authorized to perform this action</li><li>-2 - Invalid token</li></ul></td><td colspan="1" class="confluenceTd"><p><strong>Can be used to find patient ID's, if you don't know the patient's name.</strong></p><p>Call using getallpatients.bash</p><p><br/></p></td></tr><tr><td class="confluenceTd">getlist.php</td><td colspan="1" class="confluenceTd"><ul><li>token</li><li>patientId</li><li>type</li><li>visit_id</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">getpatientrecord.php</td><td colspan="1" class="confluenceTd"><ul><li>site</li><li>patientId</li><li>token</li><li>zero or more section names, separated by spaces</li></ul></td><td colspan="1" class="confluenceTd"><p>An XML file containing either a complete set of CCDS sections, or individual CCDS sections, as specified.</p><p>If no section names are specified, all sections will be returned.</p></td><td colspan="1" class="confluenceTd"><p><br/></p></td><td colspan="1" class="confluenceTd"><p>Call using getpatientrecord.bash</p><p>Section Names:</p><p>'SMOKES' - SocialHistory<br/>'SOCHIS' - SocialHistory<br/>'PROBS' - Problems<br/>'MEDS' - Medications<br/>'ALLRGS' - Allergies<br/>'LABPRC' - LabProcedures<br/>'LABRES' - LabResults<br/>'VITALS' - VitalSigns<br/>'PROCS' - Procedures<br/>'CARETM' - CareTeam<br/>'IMMUNS' - Immunizations<br/>'IMPLTS' - ImplantableDevces<br/>'ASSMTS' - Assessments<br/>'TRPLAN' - PlanOfCare<br/>'GOALS' - Goals<br/>'CNCRNS' - HealthConcerns</p></td></tr><tr><td class="confluenceTd">getuserlist.php</td><td colspan="1" class="confluenceTd"><ul><li>site</li><li>token</li></ul></td><td colspan="1" class="confluenceTd"><p>An XML file containing an array of records, consisting of:</p><ul><li>id</li><li>fname</li><li>lname</li><li>name</li><li>username</li></ul></td><td colspan="1" class="confluenceTd"><ul><li>-1 - ERROR: Sorry, there was an error processing your data. Pleas re-submit the information again.</li><li>-2 - You are not Authorized to perform this action</li><li>-2 Invalid Token</li></ul></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td class="confluenceTd">initsetup.php</td><td colspan="1" class="confluenceTd">N/A</td><td colspan="1" class="confluenceTd"><p>HTML page containing the message:</p><p><strong>Database Updated Successfully</strong></p></td><td colspan="1" class="confluenceTd"><p>HTML page containing the message:</p><p><strong>Database Failed to Update</strong></p></td><td colspan="1" class="confluenceTd"><p>Must be called from browser.</p><p>Creates api_tokens table, if it doesn't already exist.</p><p>Adds columns to users table to support API.token</p></td></tr><tr><td class="confluenceTd">login.php</td><td colspan="1" class="confluenceTd"><ul><li>username</li><li>password</li><li>date*</li><li>site</li></ul></td><td colspan="1" class="confluenceTd"><p>An XML file containing an array of records, consisting of:</p><ul><li>token</li><li>id (user)</li><li>provided</li><li>firstname</li><li>lastname</li><li>title</li></ul></td><td colspan="1" class="confluenceTd"><ul><li>-1 - Appointment not found</li><li>-1 - Prescription records not found</li><li>-1 - Lab results not found</li><li>-1 - Mesages not found</li><li>-1 - Username/Password incorrect.</li></ul></td><td colspan="1" class="confluenceTd"><p>Call using login.bash</p><p>If date not specified, current date is assumed.</p><p><br/></p></td></tr><tr><td class="confluenceTd"><span style="color: rgb(0,51,102);">report_visits.php</span></td><td colspan="1" class="confluenceTd"><ul><li><span style="color: rgb(0,51,102);">token</span></li><li><span style="color: rgb(0,51,102);">facility</span></li><li><span style="color: rgb(0,51,102);">provider</span></li><li><span style="color: rgb(0,51,102);">from_date</span></li><li><span style="color: rgb(0,51,102);">to_date</span></li><li><span style="color: rgb(0,51,102);">new_patients (boolean)</span></li></ul></td><td colspan="1" class="confluenceTd"><p><span style="color: rgb(0,51,102);">Returns a pdf file and a html file containing the summary of visits. </span></p></td><td colspan="1" class="confluenceTd"><p><br/></p></td><td colspan="1" class="confluenceTd"><p><span style="color: rgb(0,51,102);"><strong><span>Use this to find patient encounter ID's</span></strong><br/></span></p><p><span style="color: rgb(0,51,102);">Call using report_visits.bash</span></p><p><span style="color: rgb(0,51,102);">Test script returns report_visits.pdf, <span>report_visits.html.</span></span></p></td></tr><tr><td class="confluenceTd">searchpatient.php</td><td colspan="1" class="confluenceTd"><ul><li>token</li><li>firstname</li><li>lastname</li><li>site</li></ul></td><td colspan="1" class="confluenceTd"><p>An XML file containin an array of records, consisting of:</p><ul><li>id</li><li>pid</li><li>firstname</li><li>lastname</li><li>phone</li><li>dob</li><li>gender<br/><br/></li></ul></td><td colspan="1" class="confluenceTd"><ul><li>-1 - ERROR: Sorry, there was an error processing your data. Pleas re-submit the information again.</li><li>-2 - You are not Authorized to perform this action</li><li>-2 Invalid Token</li></ul></td><td colspan="1" class="confluenceTd"><p><strong>Use this to find patient ID, if you know the patient's name.</strong></p><p><span>example POST variables:</span></p><p><span>firstname = &quot;Artemis&quot;, lastname=&quot;Osborne&quot;</span></p><p>Returns patient list entries that match at least one of the search parameters.</p><p>Call using searchpatient.bash</p></td></tr></tbody></table></div><p><br/></p><h2 id="DrCloudEHR2020MU3APIDocumentation-APITestProgramsOverview">API Test Programs Overview</h2><p>The DrCloudEHR API Test Programs are a set of PHP scripts that serve as a demonstration of the DrCloudEHR API.   While the Test Programs are written in PHP, the API should work with any programming language that is capable of implementing a RESTful API.</p><p>These scripts have been tested on a Linux system, but should also work on MacOS.  It may also work on Windows, using a package like WAMP, plus a Unix/Linux-type shell program, such as git-bash.</p><div>The &quot;test_settings.inc&quot; file must be customized before running these scripts.</div><div>See the </div><p><br/></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 96.972565%;"><colgroup><col style="width: 20.246582%;"/><col style="width: 14.156495%;"/><col style="width: 19.23706%;"/><col style="width: 23.232422%;"/><col style="width: 23.131104%;"/></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Script Name</th><th colspan="1" class="confluenceTh">Arguments</th><th colspan="1" class="confluenceTh">Corresponding PHP API script</th><th colspan="1" class="confluenceTh">Returns</th><th colspan="1" class="confluenceTh">Notes</th></tr><tr><td colspan="1" class="confluenceTd">login.bash</td><td colspan="1" class="confluenceTd">(none)</td><td colspan="1" class="confluenceTd">test_login.php</td><td colspan="1" class="confluenceTd"><ul><li>-1 - Appointment not found</li><li>-1 - Prescription records not found</li><li>-1 - Lab results not found</li><li>-1 - Mesages not found</li><li>-1 - Username/Password incorrect.</li></ul></td><td colspan="1" class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="1" class="confluenceTd">getallpatients.bash</td><td colspan="1" class="confluenceTd">(none)</td><td colspan="1" class="confluenceTd">test_getallpatients.php</td><td colspan="1" class="confluenceTd"><ul><li>1 - No Patient Vitals data found</li><li>1 - Error processing patient records</li><li>-2 - You are not authorized to perform this action</li><li>-2 - Invalid token</li></ul></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">getpatientrecord.bash</td><td colspan="1" class="confluenceTd"><ul><li>encounter ID</li><li>zero or more section names</li></ul></td><td colspan="1" class="confluenceTd"><p>test_getpatientrecord.php</p></td><td colspan="1" class="confluenceTd"><p>These status values are returned by this script.</p><ul><li>1 - Encounter ID missing</li><li>2 - No valid section names found</li></ul></td><td colspan="1" class="confluenceTd"><p><br/></p></td></tr><tr><td colspan="1" class="confluenceTd">getuserlist.bash</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">test_getuserlist.php</td><td colspan="1" class="confluenceTd"><ul><li>-1 - ERROR: Sorry, there was an error processing your data. Pleas re-submit the information again.</li><li>-2 - You are not Authorized to perform this action</li><li>-2 Invalid Token</li></ul></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">report_visits.bash</td><td colspan="1" class="confluenceTd">(none)</td><td colspan="1" class="confluenceTd">test_reportvisits.php</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">searchpatient.bash</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><ul><li>-1 - ERROR: Sorry, there was an error processing your data. Pleas re-submit the information again.</li><li>-2 - You are not Authorized to perform this action</li><li>-2 Invalid Token</li></ul></td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">mu3_get_ccda.bash</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">Same as getpatientrecord.php</td></tr><tr><td colspan="1" class="confluenceTd">mu3_get_generic.bash</td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">Generic script used to implement the following convenience scripts.</td></tr><tr><td colspan="5" class="confluenceTd"><p>The following convenience scripts are &quot;dynamically linked&quot; to mu3_get_generic.bash. Their actions are determined by checking the script name.</p><p>NOTE: The generated C-CDA files will include other sections due to requirements unrelated to MU3.</p></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_social</p><p>mu3_get_socialhistory</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Social History section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p><span style="color: rgb(0,51,102);">mu3_get_probs</span></p><p><span style="color: rgb(0,51,102);">mu3_get_problems</span></p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Problems section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_meds</p><p>mu3_get_medications</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Medications/ Prescriptions(?) section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_allrgs</p><p>mu3_get_allergies</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Med Allergies section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_labprc</p><p>mu3_get_labprocedures</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Lab Procedures section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_labres</p><p>mu3_get_labresults</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Lab Results section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_vitals</p><p>mu3_get_vitalsigns</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Vital Signs section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_procs</p><p>mu3_get_procedures</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Procedures section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_caretm</p><p>mu3_get_careteam</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Care Team section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_immuns</p><p>mu3_get_immunizations</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Immunizations section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_implts</p><p>mu3_get_implantabledevices</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Implantable Devices section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_assmts</p><p>mu3_get_assessments</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Assessments section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_trplan</p><p>mu3_get_planofcare</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Care Plan section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd">mu3_get_goals</td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Social History section.</td><td colspan="1" class="confluenceTd"><br/></td></tr><tr><td colspan="1" class="confluenceTd"><p>mu3_get_cncrns</p><p>mu3_get_healthconcerns</p></td><td colspan="1" class="confluenceTd"><ul><li>encounterId</li></ul></td><td colspan="1" class="confluenceTd"><br/></td><td colspan="1" class="confluenceTd">C-CDA file including Health Concerns section.</td><td colspan="1" class="confluenceTd"><br/></td></tr></tbody></table></div><h1 id="DrCloudEHR2020MU3APIDocumentation-SettingupDrCloudEHRAPI">Setting up DrCloudEHR API</h1><h2 id="DrCloudEHR2020MU3APIDocumentation-Installation">Installation</h2><p>If you are installing this on a DrCloudEHR instance that includes the MU3 code, then you can find the API and test scripts in the <code>ccr/ccd/mu3/</code>directory.  </p><p><br/></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: RDark" data-theme="RDark">$ ls -l ccr/ccd/mu3/
total 332
drwxrwxr-x 3 jfo jfo   4096 Sep 18 17:45 api
drwxrwxr-x 4 jfo jfo   4096 Sep 19 13:06 drcloud
-rw-rw-r-- 1 jfo jfo  35147 Sep 18 17:02 license.txt
-rw-rw-r-- 1 jfo jfo 286711 Sep 18 17:02 Medmasterpro-API.pdf
drwxrwxr-x 3 jfo jfo   4096 Sep 18 17:02 openemr
-rw-rw-r-- 1 jfo jfo    317 Sep 18 17:02 README.md
$ ls -l contrib/mu3/openemr-api-master/drcloud
total 12
drwxr-xr-x 4 jfo jfo 4096 Sep 19 14:31 api
-rw-rw-r-- 1 jfo jfo 3272 Sep 19 12:50 README.ensoftek
drwxrwxr-x 2 jfo jfo 4096 Sep 19 16:32 tests
$ </pre>
</div></div><p>Unfortunately, both the api/ and tests/ directories need to be (recursively) copied into other locations.  The api/ directory must be copied to a top level directory, due to limitations in the implementation.   The tests/ directory should be copied into a directory in the user's home directory, or a directory that is writeable by the user.</p><h1 id="DrCloudEHR2020MU3APIDocumentation-initsetup.php">initsetup.php</h1><p>The initsetup.php script sets up the additional tables and columns needed to integrate the API into DrCloudEHR</p><p style="margin-left: 30.0px;">http://&lt;server:port&gt;/&lt;drcloud&gt;/api/initsetup.php?site=&lt;site-name&gt;</p><p style="margin-left: 30.0px;">https://&lt;server:port&gt;/&lt;drcloud&gt;/api/initsetup.php?site=&lt;site-name&gt;</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: Confluence" data-theme="Confluence">https://test.drcloudemr.com/dc_ehr_qa/api/initsetup.php?site=jsmdpa
</pre>
</div></div><p><br/></p><h1 id="DrCloudEHR2020MU3APIDocumentation-Createthetest_settings.incfile">Create the test_settings.inc file</h1><p>The <code>test_settings.inc</code> file is used to simplify the creation of test scripts.</p><p>There is a <code>sample_test_settings.inc</code> file that can be used as a template.</p><p>NOTE: $USERNAME and $PASSWORD are only used by test_login.php.  The test_login.php could be rewritten to require the user to pass the username and password on the command line.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>test_settings.inc</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: php; gutter: false; theme: RDark" data-theme="RDark">&lt;?php
# URL of the API directory.
$URL = &quot;http://dc-xenial-02/dc_ehr_qa/api&quot;;
$USERNAME = &quot;admin&quot;;
$PASSWORD = &quot;demo&quot;;
$SITE = alpha;</pre>
</div></div><h1 id="DrCloudEHR2020MU3APIDocumentation-LogintoAPI">Login to API</h1><p>To &quot;login&quot; to the API, the user must run the &quot;login.bash&quot; script.  When you run this bash script, it will create the file token.inc, which contains token variable, $token.  This file, along with the <code>test_settings.inc</code> file, will be used by the other <code>test_*.php</code> scripts.  The token also contains the expiration timedate.   The expiration timedate is set whenever the user logs in.   It is currently set to the current time + one hour.  This is currently not configurable.  The API will check the expiration timedate every time it validates the token.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Running login.bash</b></div><div class="codeContent panelContent pdl">
<pre class="syntaxhighlighter-pre" data-syntaxhighlighter-params="brush: xml; gutter: false; theme: RDark" data-theme="RDark">bash ./login.bash

  or if the file has execute permissions, 
./login.bash</pre>
</div></div><h1 id="DrCloudEHR2020MU3APIDocumentation-TermsofUse">Terms of Use</h1><p>This is a legal agreement (&quot;Agreement&quot;) between you, the &quot;User&quot;, and EnSoftek Inc (&quot;Company&quot;).  BY ACCEPTING THIS AGREEMENT, YOU ARE CONSENTING TO BE BOUND BY ITS TERMS. Read the terms of the agreement <a href="https://www.drcloudemr.com/terms-of-use/" class="external-link" rel="nofollow">here. </a></p><h2 id="DrCloudEHR2020MU3APIDocumentation-Definitions">Definitions</h2><p>As used herein: the &quot;Software&quot; means the DrCloudEHR Application Programming Interface (API).</p><h2 id="DrCloudEHR2020MU3APIDocumentation-LicenseGrant">License Grant</h2><p>All Users SHALL possess an active DrCloudEHR license agreement.   Use of this Software SHALL BE COVERED BY THE TERMS OF THAT LICENSE AGREEMENT.</p><h2 id="DrCloudEHR2020MU3APIDocumentation-LimitationofLiability">Limitation of Liability</h2><p>Limitation of Liability for this Software SHALL BE COVERED BY THE TERMS OF THAT LICENSE AGREEMENT.</p><h2 id="DrCloudEHR2020MU3APIDocumentation-LicenseRestrictions">License Restrictions</h2><p>The Company may limit the number of persons that can use the Software.  </p><h2 id="DrCloudEHR2020MU3APIDocumentation-Usage">Usage</h2><p>If you become aware of any unauthorized access or use of the Software, you shall immediately notify the Company.</p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Nov 19, 2025 02:49</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
